<!-- build time:Mon Dec 06 2021 20:17:20 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta charset="utf-8"><title>年没怀念der博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:type" content="website"><meta property="og:title" content="年没怀念der博客"><meta property="og:url" content="http://example.com/index.html"><meta property="og:site_name" content="年没怀念der博客"><meta property="og:locale" content="en_US"><meta property="article:author" content="nmhn"><meta name="twitter:card" content="summary"><link rel="alternate" href="/atom.xml" title="年没怀念der博客" type="application/atom+xml"><link rel="icon" href="/favicon.png"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">年没怀念der博客</a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="Search"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-数据库的安全性" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7/" class="article-date"><time datetime="2021-12-06T11:03:26.530Z" itemprop="datePublished">2021-12-06</time></a></div><div class="article-inner"><div class="article-entry" itemprop="articleBody"><h1 id="数据库的安全性"><a href="#数据库的安全性" class="headerlink" title="数据库的安全性"></a>数据库的安全性</h1><h2 id="8-4-存取控制"><a href="#8-4-存取控制" class="headerlink" title="8.4 存取控制"></a>8.4 存取控制</h2><h6 id="用户权限定义和合法的权限检查机制一起组成了DBMS的安全子系统"><a href="#用户权限定义和合法的权限检查机制一起组成了DBMS的安全子系统" class="headerlink" title="用户权限定义和合法的权限检查机制一起组成了DBMS的安全子系统"></a>用户权限定义和合法的权限检查机制一起组成了DBMS的安全子系统</h6><p>常用存取控制方法</p><h4 id="自主存取控制"><a href="#自主存取控制" class="headerlink" title="自主存取控制"></a>自主存取控制</h4><p>灵活</p><p>同一用户对不同的数据对象有不同的…</p><h5 id="授权粒度"><a href="#授权粒度" class="headerlink" title="授权粒度"></a>授权粒度</h5><p>授权的数据对象粒度</p><p>数据库,表,属性列,行…</p><ol><li>实现–GRANT REVOKE</li><li>数据库角色<br>在用户量较大的情况下引入<br>定义:一组与数据库操作有关的角色<br>可以为具有相同权限的用户创建一个角色</li><li>权限传播<br>…</li></ol><h4 id="强制存取控制"><a href="#强制存取控制" class="headerlink" title="强制存取控制"></a>强制存取控制</h4><h5 id="主体与客体"><a href="#主体与客体" class="headerlink" title="主体与客体"></a>主体与客体</h5><h5 id="敏感度标记"><a href="#敏感度标记" class="headerlink" title="敏感度标记"></a>敏感度标记</h5><p>DBMS为每个实例指派一个敏感度标记</p><p>敏感度分为若干级别(绝密..</p><p>主体的敏感度标记称为许可证级别</p><p>客体的称为密级</p><p>MAC机制就是通过对比主体的Label和客体的Label,最终确定主体是否能够存取客体</p><h5 id="强制存取控制规则"><a href="#强制存取控制规则" class="headerlink" title="强制存取控制规则"></a>强制存取控制规则</h5><ol><li>读 主体许可证级别&gt;=客体密级</li><li>写 主体的许可证级别=客体密级</li><li>修正规则*****<ol><li>waiting for write</li></ol></li></ol><h4 id="权限-只有具有合法的许可证才能存取"><a href="#权限-只有具有合法的许可证才能存取" class="headerlink" title="权限,只有具有合法的许可证才能存取"></a>权限,只有具有合法的许可证才能存取</h4><p>每一个用户被授予某一个级别的许可证</p><p>对于任意一个对象,只有具有合法的许可证才能存取</p><h2 id="8-5-视图机制"><a href="#8-5-视图机制" class="headerlink" title="8.5 视图机制"></a>8.5 视图机制</h2></div><footer class="article-footer"><a data-url="http://example.com/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7/" data-id="ckwukfh4w0001a4tvhew1duwc" class="article-share-link">Share</a></footer></div></article><article id="post-数据库操作" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" class="article-date"><time datetime="2021-12-06T11:03:26.527Z" itemprop="datePublished">2021-12-06</time></a></div><div class="article-inner"><div class="article-entry" itemprop="articleBody"><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>select</p><p>from</p><p>where</p><p>group by</p><p>having</p><p>order by</p><h5 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h5><p>指定属性列–不包含的取空</p><p>不指定-不能省略任何属性</p></div><footer class="article-footer"><a data-url="http://example.com/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" data-id="ckwukfh4z0002a4tv3nv56kjq" class="article-share-link">Share</a></footer></div></article><article id="post-查询优化" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2021/12/06/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/" class="article-date"><time datetime="2021-12-06T11:03:26.508Z" itemprop="datePublished">2021-12-06</time></a></div><div class="article-inner"><div class="article-entry" itemprop="articleBody"><h1 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h1><h4 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h4><h6 id="目的-解决集合性操作语言与过程性操作语言的不匹配"><a href="#目的-解决集合性操作语言与过程性操作语言的不匹配" class="headerlink" title="目的-解决集合性操作语言与过程性操作语言的不匹配"></a>目的-解决集合性操作语言与过程性操作语言的不匹配</h6><h6 id="原因-sql一条语句一般能产生或处理多条记录-而主语言一次只能存放一条记录"><a href="#原因-sql一条语句一般能产生或处理多条记录-而主语言一次只能存放一条记录" class="headerlink" title="原因:sql一条语句一般能产生或处理多条记录,而主语言一次只能存放一条记录"></a>原因:sql一条语句一般能产生或处理多条记录,而主语言一次只能存放一条记录</h6><h6 id="是什么-是系统为用户开设的一个数据缓冲区-存放sql语句的执行结果"><a href="#是什么-是系统为用户开设的一个数据缓冲区-存放sql语句的执行结果" class="headerlink" title="是什么:是系统为用户开设的一个数据缓冲区,存放sql语句的执行结果"></a>是什么:是系统为用户开设的一个数据缓冲区,存放sql语句的执行结果</h6><p>用户可以用SQL语句逐一地从游标中获取记录,并赋给主变量</p><h6 id="定义游标-使用Declare语句"><a href="#定义游标-使用Declare语句" class="headerlink" title="定义游标: 使用Declare语句"></a>定义游标: 使用Declare语句</h6><p>EXEC SQL DECLARE &lt;&gt; CURSOR……</p><h6 id="打开游标–执行相应的select语句-吧所有满足查询条件的记录从指定表取到缓冲区中"><a href="#打开游标–执行相应的select语句-吧所有满足查询条件的记录从指定表取到缓冲区中" class="headerlink" title="打开游标–执行相应的select语句,吧所有满足查询条件的记录从指定表取到缓冲区中"></a>打开游标–执行相应的select语句,吧所有满足查询条件的记录从指定表取到缓冲区中</h6><p>EXEC SQL OPEN &lt;游标名&gt;</p><p>此时游标指针指向查询结果集中第一条记录之前</p><h6 id="推动游标"><a href="#推动游标" class="headerlink" title="推动游标"></a>推动游标</h6><p>使用FETCH语句</p><p>EXEC SQL FETCH [[NEXT]]….</p><p>指定方向推动游标指针,然后将缓冲区中的当前记录取出来送至主变量供主语言进一步处理</p><p>要求:主变量与select语句中的目标列表达式具有一一对应关系</p><h6 id="关闭游标"><a href="#关闭游标" class="headerlink" title="关闭游标"></a>关闭游标</h6><p>CLOSE语句</p><p>EXEC SQL CLOSE &lt;游标名&gt;</p><h2 id="7-1查询处理过程"><a href="#7-1查询处理过程" class="headerlink" title="7.1查询处理过程"></a>7.1查询处理过程</h2><h3 id="7-1-1-查询分析"><a href="#7-1-1-查询分析" class="headerlink" title="7.1.1 查询分析"></a>7.1.1 查询分析</h3><p>对查询语句进行扫描,词法分析和语法分析</p><h3 id="7-1-2查询检查"><a href="#7-1-2查询检查" class="headerlink" title="7.1.2查询检查"></a>7.1.2查询检查</h3><p>根据数据字典中的用户权限和完整性约束定义对用户的存取权限进行检查</p><p>检查通过后将SQL查询语句转换成等价的<u>关系代数表达式</u></p><h3 id="7-1-4查询优化"><a href="#7-1-4查询优化" class="headerlink" title="7.1.4查询优化"></a>7.1.4查询优化</h3><p>选择一个高效执行的查询处理策略</p><h4 id="代数优化-关系代数表达式优化"><a href="#代数优化-关系代数表达式优化" class="headerlink" title="代数优化-关系代数表达式优化"></a>代数优化-关系代数表达式优化</h4><h4 id="物理优化-存取物理介质及…的优化"><a href="#物理优化-存取物理介质及…的优化" class="headerlink" title="物理优化-存取物理介质及…的优化"></a>物理优化-存取物理介质及…的优化</h4><h3 id="7-1-5查询执行"><a href="#7-1-5查询执行" class="headerlink" title="7.1.5查询执行"></a>7.1.5查询执行</h3><p>不用多言</p><h2 id="7-2执行查询操作的基本算法"><a href="#7-2执行查询操作的基本算法" class="headerlink" title="7.2执行查询操作的基本算法"></a>7.2执行查询操作的基本算法</h2><h3 id="1-选择操作"><a href="#1-选择操作" class="headerlink" title="1. 选择操作"></a>1. 选择操作</h3><p>顺序扫描/二分查找/索引[散列]/复合选择</p><p>索引–提供元组指针,间接检索</p><p>B+树索引:同样是提供元组指针,同时支持顺序集中依次查找</p><p>如是 sdept=’cs’ and sae&gt;20:则</p><p>算法一:分别查询,求交集</p><p>算法而:先找到第一个查询的指针,然后在第一个查询的指针基础上进行第二个查询</p><h3 id="2-连接操作"><a href="#2-连接操作" class="headerlink" title="2.连接操作"></a>2.连接操作</h3><h6 id="连接操作是查询处理中最耗时的操作之一"><a href="#连接操作是查询处理中最耗时的操作之一" class="headerlink" title="连接操作是查询处理中最耗时的操作之一"></a>连接操作是查询处理中最耗时的操作之一</h6><p>[例2]</p><p>SELECT *</p><p>FROM Student,SC</p><p>WHERE Student.Sno=SC.Sno</p><p>[例2end]</p><ol><li>嵌套循环法<br>对外层循环的每一个元组,检测内层循环中的每一个元组,检查两个元组在连接属性上是否相等<br>满足,即串接后作为结果输出</li><li>索引链接法<br>在输出表上建立属性Sno的索引(如果原来没有)<br>对student中每个元组,有Sno值通过Sc……..</li><li>排序合并法<br>适合连接的诸表已经排好序的情况<br>没排序则排序<br>取Student表中第一个sno,然后依次找sc表中具有相同sno的元组<br>扫到sno不相同的第一个sc元组时,返回Student扫描它的下一个元组<br>之后循环</li><li>散列连接法<br>把连接属性作为散列码,<br>然后划分</li></ol><h3 id="3-投影操作"><a href="#3-投影操作" class="headerlink" title="3.投影操作"></a>3.投影操作</h3><h6 id="选取关系的某些列-从垂直的方向减小关系的大小"><a href="#选取关系的某些列-从垂直的方向减小关系的大小" class="headerlink" title="选取关系的某些列,从垂直的方向减小关系的大小"></a>选取关系的某些列,从垂直的方向减小关系的大小</h6><p>如果投影属性列包括了关系R的主键,则操作可言直接执行,操作结果将于R中元组个数相同</p><p>否则则需要消除重复元组</p><h3 id="4-集合运算操作"><a href="#4-集合运算操作" class="headerlink" title="4.集合运算操作"></a>4.集合运算操作</h3><p>并,查,交,笛卡尔积</p><p>并查缴类似排序合并法</p><p>笛卡尔积一般嵌套循环合并</p><h2 id="7-3关系数据库系统的查询优化"><a href="#7-3关系数据库系统的查询优化" class="headerlink" title="7.3关系数据库系统的查询优化"></a>7.3关系数据库系统的查询优化</h2><p>分布式数据库:总代接=I/O代价+*****</p><h4 id="7-3-2查询优化实例"><a href="#7-3-2查询优化实例" class="headerlink" title="7.3.2查询优化实例"></a>7.3.2查询优化实例</h4><p>假定学生-课程数据库中有1000个学生记录,10000个选课记录</p><p>其中选修二号课程的选课记录为50个</p><p>查询选修了2号课程的学生姓名</p><h5 id="第一种情况"><a href="#第一种情况" class="headerlink" title="第一种情况"></a>第一种情况</h5><h6 id="1-计算广义笛卡尔积"><a href="#1-计算广义笛卡尔积" class="headerlink" title="1.计算广义笛卡尔积"></a>1.计算广义笛卡尔积</h6><p>-把student和sc的每个元组连接起来的做法</p><h6 id="2-做选择操作"><a href="#2-做选择操作" class="headerlink" title="2.做选择操作"></a>2.做选择操作</h6><p>依次读入连接后的元组,按照选择条件选取满足要求的记录</p><h6 id="3-做投影操作"><a href="#3-做投影操作" class="headerlink" title="3.做投影操作"></a>3.做投影操作</h6><p>把第二步操作的结果在Sname上作投影输出,得到最终输出</p><h5 id="第二种情况"><a href="#第二种情况" class="headerlink" title="第二种情况"></a>第二种情况</h5><h6 id="1-计算自然连接"><a href="#1-计算自然连接" class="headerlink" title="1.计算自然连接"></a>1.计算自然连接</h6><h6 id="2-读取中间文件块-进行选择操作"><a href="#2-读取中间文件块-进行选择操作" class="headerlink" title="2.读取中间文件块,进行选择操作"></a>2.读取中间文件块,进行选择操作</h6><h6 id="3-投影输出"><a href="#3-投影输出" class="headerlink" title="3.投影输出"></a>3.投影输出</h6><h5 id="第三种情况"><a href="#第三种情况" class="headerlink" title="第三种情况"></a>第三种情况</h5><h6 id="1-先对sc表进行选择运算"><a href="#1-先对sc表进行选择运算" class="headerlink" title="1.先对sc表进行选择运算"></a>1.先对sc表进行选择运算</h6><h6 id="2-读取Student表-把读入的student元组和内存中收到sc元组做连接"><a href="#2-读取Student表-把读入的student元组和内存中收到sc元组做连接" class="headerlink" title="2.读取Student表,把读入的student元组和内存中收到sc元组做连接"></a>2.读取Student表,把读入的student元组和内存中收到sc元组做连接</h6><h6 id="3-把连接结果投影输出"><a href="#3-把连接结果投影输出" class="headerlink" title="3.把连接结果投影输出"></a>3.把连接结果投影输出</h6><p>假如SC表的Cno字段/Student表上的Sno有索引,可加快读取</p><h4 id="有选择和连接操作时-先做选择操作–代数优化"><a href="#有选择和连接操作时-先做选择操作–代数优化" class="headerlink" title="有选择和连接操作时,先做选择操作–代数优化"></a>有选择和连接操作时,先做选择操作–代数优化</h4><h4 id="选择操作算法有权标扫描和索引扫描两种-在第三种情况下-索引扫描效果好–物理优化"><a href="#选择操作算法有权标扫描和索引扫描两种-在第三种情况下-索引扫描效果好–物理优化" class="headerlink" title="选择操作算法有权标扫描和索引扫描两种,在第三种情况下,索引扫描效果好–物理优化"></a>选择操作算法有权标扫描和索引扫描两种,在第三种情况下,索引扫描效果好–物理优化</h4><h3 id="7-3-3-代数优化"><a href="#7-3-3-代数优化" class="headerlink" title="7.3.3 代数优化"></a>7.3.3 代数优化</h3><h4 id="关系代数表达式的等价变换规则"><a href="#关系代数表达式的等价变换规则" class="headerlink" title="关系代数表达式的等价变换规则"></a>关系代数表达式的等价变换规则</h4><p>指用相同的关系代替两个表达式中相应的关系所得到的结果是相同的</p><h5 id="常用的等价变换规则"><a href="#常用的等价变换规则" class="headerlink" title="常用的等价变换规则"></a>常用的等价变换规则</h5><h4 id="代数优化策略-通过对关系代数表达式的等价变化来提高查询效率"><a href="#代数优化策略-通过对关系代数表达式的等价变化来提高查询效率" class="headerlink" title="代数优化策略-通过对关系代数表达式的等价变化来提高查询效率"></a>代数优化策略-通过对关系代数表达式的等价变化来提高查询效率</h4><h5 id="启发式规则"><a href="#启发式规则" class="headerlink" title="启发式规则"></a>启发式规则</h5><ol><li><strong>选择运算尽可能先做,最重要最基本的一条</strong></li><li>把投影运算和选择运算同时进行</li><li>把投影同其前后的双目运算结合起来</li><li>把某些选择同在它前面要执行的笛卡尔积结合起来形成一个连接运算’</li><li>找出公共子表达式</li></ol><h4 id="代数优化算法"><a href="#代数优化算法" class="headerlink" title="代数优化算法"></a>代数优化算法</h4><p>输入:一个查询树</p><p>输出:优化的查询树</p><h5 id="物理优化"><a href="#物理优化" class="headerlink" title="物理优化"></a>物理优化</h5><p>代数优化改变查询语句中操作的次序和组合,不涉及底层的存取路径</p><p>定义:选择高效合理的操作算法/存取路径</p><h6 id="基于存取路径的优化"><a href="#基于存取路径的优化" class="headerlink" title="基于存取路径的优化"></a>基于存取路径的优化</h6><p>选择操作的启发式规则–</p><ol><li><p>对于小关系,使用全表顺序扫描,即使有索引</p></li><li><p>对于大关系–</p><ol><li>对于选择条件是主键=值的查询<br>选择主键索引</li><li>对于选择条件是非主属性=值的查询,且选择列上有索引<br>估算查询结果的元组书目–比例小(10%),索引,比例大-全表</li><li>选择条件是属性上的非等值查询或范围查询,且存在索引<br>估算查询结果的元组书目–比例小(10%),索引,比例大-全表</li><li>对于用and连接的合取选择条件<br>优先采用组合索引扫描….</li><li>or连接<br>一般全表</li></ol></li></ol><p>连接操作的启发式规则</p><ol><li>两个比哦啊都已经按照连接属性排序<br>排序合并法</li><li>一个表在连接属性上有索引<br>索引连接法</li><li>都不是1,2,而其中一个表比较小<br>散列连接法</li><li>可以选用嵌套循环阀,并选择较小的表作为外表</li></ol><h6 id="基于代价估算的优化"><a href="#基于代价估算的优化" class="headerlink" title="基于代价估算的优化"></a>基于代价估算的优化</h6><h6 id="二者结合的优化"><a href="#二者结合的优化" class="headerlink" title="二者结合的优化"></a>二者结合的优化</h6></div><footer class="article-footer"><a data-url="http://example.com/2021/12/06/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/" data-id="ckwukfh500003a4tv7qpuhrs5" class="article-share-link">Share</a></footer></div></article><article id="post-9.1 数据库完整性概述" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2021/12/06/9.1%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E6%A6%82%E8%BF%B0/" class="article-date"><time datetime="2021-12-06T11:03:26.476Z" itemprop="datePublished">2021-12-06</time></a></div><div class="article-inner"><div class="article-entry" itemprop="articleBody"><p>9.1 数据库完整性概述</p><p>数据库完整性–数据的正确性,有效性,西安共性</p><p>列级约束</p><p>对属性的数据类型,等的定义</p><p>元祖约束</p><p>元组中各个属性之间的约束关系</p><h4 id="实现完整性约束的方法"><a href="#实现完整性约束的方法" class="headerlink" title="实现完整性约束的方法"></a>实现完整性约束的方法</h4><ol><li>提供定义机制</li><li>提供检查方法</li><li>违约处理</li></ol><h2 id="9-4用户定义的完整性"><a href="#9-4用户定义的完整性" class="headerlink" title="9.4用户定义的完整性"></a>9.4用户定义的完整性</h2><h2 id="9-5触发器"><a href="#9-5触发器" class="headerlink" title="9.5触发器"></a>9.5触发器</h2><p>一类用户定义在关系数据表上的一类由事件驱动的特殊过程,用编程的方法实现复杂的业务规则</p><p>是一种特殊类型的存储过程</p><p>可用触发器完成很多数据库完整性保护的过程</p><ol><li>复杂的业务规则</li><li>比较数据修改前后状态</li></ol><p>SQL:CREATE TRIGER命令</p><h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>原子性:不可分割</p><p>一致性:事务执行结果必须从一个状态转换到另一个状态时保持一致,即若中间出现错误,则将所有操作撤销</p><p>事务应当具有ACID性质，<br>A是<strong>原子</strong>性(atomic)：事务中包含的各项操作必须全部成功执行或者全部不执行。任何一项操作失败，将导致整个事务失败，其他已经执行的任务所作的数据操作都将被撤销，只有所有的操作全部成功，整个事务才算是成功完成。<br>C是<strong>一致性</strong>(consistent)：保证了当事务结束后，系统状态是一致的。那么什么是一致的系统状态？例如，如果银行始终遵循着”银行账号必须保持正态平衡”的原则，那么银行系统的状态就是一致的。上面的转账例子中，在取钱的过程中，账户会出现负态平衡，在事务结束之后，系统又回到一致的状态。这样，系统的状态对于客户来说，始终是一致的。<br>I是<strong>隔离</strong>性(isolated)：使得并发执行的事务，彼此无法看到对方的中间状态。保证了并发执行的事务顺序执行，而不会导致系统状态不一致。<br>D是<strong>持久性</strong>(durable)：保证了事务完成后所作的改动都会被持久化，即使是发生灾难性的失败。可恢复性资源保存了一份事务日志，如果资源发生故障，可以通过日志来将数据重建起来。</p><p>事务应处在下列状态之一</p><p>活动状态</p><p>失败状态:意味着要回滚</p><p>中止状态:数据库已经回滚完毕,恢复到提交前状态</p><p>提交状态:当数据更改完全写入磁盘时,进入提交状态</p><p>10.3.1事务故障的恢复</p><p>1.反向扫描日文件日志,查找该事务的更新操作</p><p>2.对该事务的更新操作执行你操作</p><p>3.继续反向扫描,直到读到此事务的开始操作</p><p>10.3.2系统故障恢复</p><p>1.<strong>正向</strong>扫描日志文件,列出Redo队列,Undo队列</p><h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p><u><strong>登记两条原则</strong></u></p><p><u><strong>1.登记次序严格按并行事物执行顺序</strong></u></p><p><u><strong>2.先写日志文件,后写数据库</strong></u></p></div><footer class="article-footer"><a data-url="http://example.com/2021/12/06/9.1%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E6%A6%82%E8%BF%B0/" data-id="ckwukfh4n0000a4tv58jo0rf8" class="article-share-link">Share</a></footer></div></article><article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2021/12/06/hello-world/" class="article-date"><time datetime="2021-12-06T05:18:37.655Z" itemprop="datePublished">2021-12-06</time></a></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/2021/12/06/hello-world/">Hello World</a></h1></header><div class="article-entry" itemprop="articleBody"><p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p></div><footer class="article-footer"><a data-url="http://example.com/2021/12/06/hello-world/" data-id="ckwu894nn0000o4tvbj8845n9" class="article-share-link">Share</a></footer></div></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">Archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Recent Posts</h3><div class="widget"><ul><li><a href="/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7/">(no title)</a></li><li><a href="/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/">(no title)</a></li><li><a href="/2021/12/06/%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96/">(no title)</a></li><li><a href="/2021/12/06/9.1%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E6%A6%82%E8%BF%B0/">(no title)</a></li><li><a href="/2021/12/06/hello-world/">Hello World</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2021 nmhn<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body></html><!-- rebuild by hrmmi -->