<!-- build time:Sat Apr 02 2022 20:04:21 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="年没怀念der博客" href="http://example.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="年没怀念der博客" href="http://example.com/atom.xml"><link rel="alternate" type="application/json" title="年没怀念der博客" href="http://example.com/feed.json"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="操作系统,计算机"><link rel="canonical" href="http://example.com/2021/12/07/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"><title>21/12/7 存储管理 - 操作系统 - 操作系统 - 大三 | Nmhn = 年没怀念 der 博客</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">21/12/7 存储管理 - 操作系统</h1><div class="meta"><span class="item" title="Created: 2021-12-07 08:43:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">Posted on</span> <time itemprop="dateCreated datePublished" datetime="2021-12-07T08:43:00+08:00">2021-12-07</time> </span><span class="item" title="Symbols count in article"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">Symbols count in article</span> <span>3.7k</span> <span class="text">words</span> </span><span class="item" title="Reading time"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">Reading time</span> <span>3 mins.</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="Toggle navigation bar"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Nmhn</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2021/12/07/6FDQ3libdUJvtzY.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/07/fC2K5xBpaLIyEP1.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/07/OlsJy5weSQ6N7gM.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/07/B6pSZ2aYjA78Rz9.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/07/vGNmxRicQsPOlY4.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2021/12/07/j32QpA4xwWfsP8d.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">Home</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/junior/" itemprop="item" rel="index" title="In 大三"><span itemprop="name">大三</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/junior/computerSystem/" itemprop="item" rel="index" title="In 操作系统"><span itemprop="name">操作系统</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="en"><link itemprop="mainEntityOfPage" href="http://example.com/2021/12/07/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="nmhn"><meta itemprop="description" content=", "></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="年没怀念 der 博客"></span><div class="body md" itemprop="articleBody"><h1 id="存储管理"><a class="anchor" href="#存储管理">#</a> 存储管理</h1><h4 id="地址访问保护机制"><a class="anchor" href="#地址访问保护机制">#</a> 地址访问保护机制</h4><ol><li><h5 id="上下界寄存器和地址检查机制"><a class="anchor" href="#上下界寄存器和地址检查机制">#</a> 上下界寄存器和地址检查机制</h5></li></ol><p>​ 作业拥有上下界，执行访存指令时，判断是否越界</p><p>​ 要求：作业程序是<strong>绝对地址</strong>或<strong>静态可浮动</strong></p><h5 id="2-基址寄存器-长度寄存器和动态地址转换机制"><a class="anchor" href="#2-基址寄存器-长度寄存器和动态地址转换机制">#</a> 2. 基址寄存器、长度寄存器和动态地址转换机制</h5><p>​ <strong>当作业被调度运行时，将作业所占内存基址及长度送基址、长度寄存器，在用户态每次执行访存指令时，先看访问地址是否小于长度，然后 + 基址进行访存。用户程序代码是</strong>动态浮动的</p><h2 id="可变分区"><a class="anchor" href="#可变分区">#</a> 可变分区</h2><h6 id="思想预先不划分内存当作业需要时向系统申请系统从其中挖出一块给该作业"><a class="anchor" href="#思想预先不划分内存当作业需要时向系统申请系统从其中挖出一块给该作业">#</a> 思想:<strong> 预先不划分内存，当作业需要时向系统申请，系统从其中挖出一块给该作业</strong></h6><p>Q:&lt;u&gt; 空闲区域如何管理 &lt;/u&gt;?</p><h3 id="多道连续可变分区法"><a class="anchor" href="#多道连续可变分区法">#</a> <strong>多道连续可变分区法</strong></h3><h5 id="特点多道连续不固定划分内存"><a class="anchor" href="#特点多道连续不固定划分内存">#</a> 特点：多道，连续，不固定划分内存</h5><h5 id="管理方法"><a class="anchor" href="#管理方法">#</a> 管理方法</h5><p><strong>系统设置一个空闲块队列，初始状态时队列中只有一个连续的空闲块。作业到达后，以</strong>某种策略分配空间。作业撤离时，将释放的空间加入空闲队列。</p><h5 id="释放方法"><a class="anchor" href="#释放方法">#</a> 释放方法</h5><p>相邻合并，否则插入</p><h5 id="例一"><a class="anchor" href="#例一">#</a> 例一</h5><p>进入执行顺序：(1,2,3)-&gt;(4)-&gt;(5)</p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112134311512.png" alt="image-20211112134311512"></p><h4 id="分配方法"><a class="anchor" href="#分配方法">#</a> 分配方法</h4><ol><li>首次满足法 从头到尾找，找到的第一个满足它的空间就给它</li><li>最佳满足法 从队列中找一个最接近的空闲队列给它</li><li>最大满足法 每次找最大的空间给最新创建的进程</li></ol><h4 id="可用空间管理"><a class="anchor" href="#可用空间管理">#</a> 可用空间管理</h4><h5 id="紧致机制-将已有的进程挪到一起腾出大块的连续空间"><a class="anchor" href="#紧致机制-将已有的进程挪到一起腾出大块的连续空间">#</a> 紧致机制 -- 将已有的进程挪到一起，腾出大块的连续空间</h5><h5 id="可再定位式分区-浮动分区分配"><a class="anchor" href="#可再定位式分区-浮动分区分配">#</a> 可再定位式分区 -- 浮动分区分配</h5><h2 id="页式存储管理"><a class="anchor" href="#页式存储管理">#</a> 页式存储管理</h2><h6 id="解决作业不连续存放的问题"><a class="anchor" href="#解决作业不连续存放的问题">#</a> 解决作业不连续存放的问题</h6><p><strong>特点：</strong> <strong>作业</strong> <strong>(进程)</strong> <strong>分成页面，内存也划分成页面，将作业</strong> **(进程 **) <strong>页面不连续地分布到内存页面</strong></p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112140406228.png" alt="image-20211112140406228"></p><h5 id="基本原理"><a class="anchor" href="#基本原理">#</a> 基本原理</h5><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112140441074.png" alt="image-20211112140441074"></p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112141149243.png" alt="image-20211112141149243"></p><p><strong>分页逻辑地址</strong> <strong>= P (页号).d (</strong> <strong>页内位移</strong> ** ) **</p><p><strong>分页物理地址</strong> <strong>= f(<strong><strong>页帧号</strong></strong>).d (<strong><strong>同上</strong></strong>)</strong></p><p><strong>P =</strong> <strong>线性逻辑地址</strong> <strong>/</strong> <strong>页面大小；</strong></p><p><strong>d =</strong> <strong>线性逻辑地址</strong> **- P***<strong> 页面大小。</strong></p><h6 id="为什么是2的k次幂"><a class="anchor" href="#为什么是2的k次幂">#</a> 为什么是 2 的 k 次幂？</h6><p>将乘除法转成移位运算</p><p><strong>为了取出一个数据，系统需要访问内存几次？</strong>-- 两次：1. 取页表，2. 取数据</p><h3 id="快表"><a class="anchor" href="#快表">#</a> 快表</h3><p>由一组联想寄存器 (TLB, Translation Lookaside Buffer) 组成。</p><p><strong>联想寄存器：一种按内容进行并行查找的快速寄存器，访问速度比主存快得多</strong></p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112142834494.png" alt="image-20211112142834494"></p><h6 id="使用bitmap数组空闲页帧链管理可用页帧"><a class="anchor" href="#使用bitmap数组空闲页帧链管理可用页帧">#</a> 使用 bitmap 数组 / 空闲页帧链管理可用页帧</h6><h5 id="共享"><a class="anchor" href="#共享">#</a> 共享</h5><p><strong>通过页表可以使几个逻辑空间指向同一个物理空间，实现程序共享。</strong></p><h5 id="越界保护"><a class="anchor" href="#越界保护">#</a> 越界保护</h5><p>设置页表长度寄存器，查页表前，检查页号是否越界</p><h5 id="访问保护"><a class="anchor" href="#访问保护">#</a> 访问保护</h5><p><strong>在每个页表项中增设一存储保护域，用于说明对该页的访问权限，每一个对该页存储的访问都首先要比照是否满足该页访问权限的说明，满足则访问，否则报异常。</strong></p><h3 id="ø优点"><a class="anchor" href="#ø优点">#</a> Ø<strong> 优点</strong></h3><p>ü<strong> 没有外碎片，每个内碎片不超过页大小。</strong></p><p>ü<strong> 程序不必连续存放。</strong></p><h3 id="ø主要缺点"><a class="anchor" href="#ø主要缺点">#</a> Ø<strong> 主要缺点：</strong></h3><p>ü<strong> 程序要一次全部装入内存才能执行。</strong></p><p>ü<strong> 采用动态地址变换机构会增加计算机的成本和降低处理机的速度。</strong></p><p>ü<strong> 各种数据结构</strong> (页表，空闲页表) 要占用一定的内存空间，而且系统要花费一定的时间来建立和管理这些表格。</p><p>ü<strong> 依然存在内碎片。</strong></p><h2 id="段式存储管理"><a class="anchor" href="#段式存储管理">#</a> 段式存储管理</h2><h4 id="特点按作业的自然段将其逻辑空间分成若干段作业以段为单位分配内存"><a class="anchor" href="#特点按作业的自然段将其逻辑空间分成若干段作业以段为单位分配内存">#</a> 特点:<strong> 按作业的自然段将其逻辑空间分成若干段，作业以段为单位分配内存。</strong></h4><p>Ø<strong> 用户作业逻辑空间为二维空间，由若干自然段组成。</strong></p><p>Ø 逻辑地址：段号段内偏移，记作 S,d。编译及装配时把所有地址记成 (S,d) 的形式。</p><p>Ø <strong>物理内存空间管理：与多道可变划分法一样，系统以段为单位分配物理内存。</strong></p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112144254340.png" alt="image-20211112144254340"></p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211112144844677.png" alt="image-20211112144844677"></p><h3 id="段页式管理"><a class="anchor" href="#段页式管理">#</a> 段页式管理</h3><p>特点：<strong>将作业分成若干段，每段用页式管理实现内存分配</strong></p><p><strong>为了获得一条指令或者数据，需要访问内存几次？</strong>--3 次，段表，页表，数据</p><h2 id="内存扩充技术"><a class="anchor" href="#内存扩充技术">#</a> 内存扩充技术</h2><h6 id="借助大容量的辅存实现内存的扩充"><a class="anchor" href="#借助大容量的辅存实现内存的扩充">#</a> 借助大容量的辅存实现内存的扩充</h6><h3 id="覆盖技术"><a class="anchor" href="#覆盖技术">#</a> 覆盖技术</h3><p>** 将用户空间划分成一个固定区和多个覆盖区。主程序放固定区，依次调用的子程序则放在同一个覆盖区。**<strong> 操作系统提供覆盖系统调用函数，由用户编程序显式调用</strong></p><p>相当于时间换空间</p><h3 id="交换技术"><a class="anchor" href="#交换技术">#</a> 交换技术</h3><p>将处于等待状态 (等 I/O 结束) 或就绪 (等 CPU) 状态的作业从主存换出到辅存，把将要执行的进程移入主存。</p><p>优点:</p><p>提高并发性</p><p>缺点:</p><p>换入换出增加处理机开销</p><p>程序换入时存在重定位问题</p><h6 id="和覆盖技术对比"><a class="anchor" href="#和覆盖技术对比">#</a> 和覆盖技术对比</h6><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211116081410386.png" alt="image-20211116081410386"></p><h3 id="虚拟存储技术"><a class="anchor" href="#虚拟存储技术">#</a> 虚拟存储技术</h3><h4 id="基础"><a class="anchor" href="#基础">#</a> 基础</h4><p>程序中不是每一条指令都会在程序的一次运行过程中执行到。<br>错误处理子程序<br>条件语句 (if...else...)<br>程序中有的指令可能只执行一次<br>程序的初始化部分<br>程序执行的局部性原理：在一段时间内，作业一般不会执行到所有程序的指令，也不会存取绝大部分数据，执行的代码和要存取的数据往往集中在某些区域中 (例如一个循环、一个数组)。</p><h5 id="目的提供用户进程一个巨大的虚拟存储空间"><a class="anchor" href="#目的提供用户进程一个巨大的虚拟存储空间">#</a> 目的：提供用户进程一个巨大的虚拟存储空间</h5><h5 id="手段利用外存磁盘实现此虚空间"><a class="anchor" href="#手段利用外存磁盘实现此虚空间">#</a> 手段：利用外存 (磁盘) 实现此虚空间。</h5><h4 id="基本思想"><a class="anchor" href="#基本思想">#</a> <strong>基本思想</strong></h4><p>系统为进程提供一个比物理内存大得多的虚拟存储空间，虚拟空间大小不受物理内存大小的限制。</p><p>虚拟空间的容量由系统的有效地址长度决定。假设地址长度为 32，按字节寻址，则虚拟存储空间大小为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> 个字节。</p><h4 id="原理"><a class="anchor" href="#原理">#</a> <strong>原理</strong></h4><p>在程序装入时，不必一次将其全部读入到内存，而只需将<strong>当前需要执行的某些区域</strong>读入到内存，然后程序开始执行。在程序执行过程中，如果<strong>需执行的指令或访问的数据尚未在内存</strong>，则由处理器<strong>通知操作系统将相应的区域调入内存</strong>，然后继续执行。</p><h4 id="分类"><a class="anchor" href="#分类">#</a> 分类</h4><h5 id="虚拟页式"><a class="anchor" href="#虚拟页式">#</a> 虚拟页式</h5><h6 id="页表增加外存标识位和外存地址项"><a class="anchor" href="#页表增加外存标识位和外存地址项">#</a> 页表增加外存标识位和外存地址项</h6><p><strong>当内存中没有空闲页面时，如果还要调入一个新页，如何处理？</strong></p><p>​	淘汰掉一个内存中的页 (淘汰策略)</p><h6 id="交换区"><a class="anchor" href="#交换区">#</a> 交换区</h6><p>用来回写<strong>数据初始值和初值为 0 的工作区</strong></p><p><strong>页表项结构</strong></p><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211116083233571.png" alt="image-20211116083233571"></p><p>合法位：置上表示该页在内存。<br>修改位：置上表示该页被修改过，在释放或淘汰时应写<br>回外存。<br>页类型：零页时：表示该页在分配物理页帧时应清 0 页帧<br>空间；回写 swap 区页时：表示回写 swap 区。<br>保护码：R、W、E 保护说明。<br>外存块号：该页所在外存的块号。<br>页 帧 号：当合法位置上时代表该页所在内存的页帧号。</p><h6 id="缺页处理"><a class="anchor" href="#缺页处理">#</a> 缺页处理</h6><p>根据发生页故障的虚地址得到页表项；<br>申请一个可用的页帧 (根据所采用的替换策略可能需要引起淘汰某一页);<br>检查页类型，若为零页，则将页帧清 0，将页帧号填入页表项的页帧号一栏，置合法位为 1。若非零页，则调用 I/O 子系统将外存块号所指的数据读到可用页帧，将页帧号填入页表项中，合法位置 1，结束。</p><h6 id="页淘汰"><a class="anchor" href="#页淘汰">#</a> 页淘汰</h6><p>查 P 页表项的修改位，若未修改，则清 0 合法位，将页帧送回空闲页帧队列。<br>若已修改，则检查类型栏。<br>若是零页或回写 swap 区页（代表还没有分配交换区空间），则申请一块 swap 区空间，将 P 的外存块号置上并清除页类型。<br>调用 I/0 子系统将页帧上的数据写到外存块号所指的外存空间。清 0 合法位，将页帧送回空闲页帧队列。</p><h3 id="页面置换策略"><a class="anchor" href="#页面置换策略">#</a> 页面置换策略</h3><h6 id="出发点-把未来不再使用的或者短时期内较少使用的页面调出"><a class="anchor" href="#出发点-把未来不再使用的或者短时期内较少使用的页面调出">#</a> 出发点： 把未来不再使用的或者短时期内较少使用的页面调出</h6><p>基本概念</p><h6 id="驻留集进程的合法页集合"><a class="anchor" href="#驻留集进程的合法页集合">#</a> 驻留集：进程的合法页集合</h6><h6 id="访问串进程访问虚拟空间的地址踪迹"><a class="anchor" href="#访问串进程访问虚拟空间的地址踪迹">#</a> 访问串：进程访问虚拟空间的地址踪迹</h6><p>举例：某进程依次访问如下地址，0100，0432，0101，0612，0102，0103，…<br>页式虚存管理以页为基本单位，只需页号即可。设页面大小为 100，上述访问串可简化为 1，4，1，6，1，1，…</p><h4 id="驻留集大小固定的局部置换策略"><a class="anchor" href="#驻留集大小固定的局部置换策略">#</a> 驻留集大小固定的局部置换策略</h4><h5 id="fifo先进先出"><a class="anchor" href="#fifo先进先出">#</a> FIFO（先进先出）</h5><p>替换最早进入的页</p><p>效果奇差</p><p>有<strong> Belady 奇异</strong> <strong>指置换策略不满足随着驻留集的增大，页故障数一定减少的规律。</strong></p><h5 id="opt最佳算法"><a class="anchor" href="#opt最佳算法">#</a> OPT（最佳算法）</h5><p>需要预先知道整个访问串的序列（因此不可实现）</p><p>理论最优</p><h5 id="lru最近最少使用"><a class="anchor" href="#lru最近最少使用">#</a> LRU（最近最少使用）</h5><p><strong>淘汰上次使用距当前最远的页</strong></p><p>栈算法</p><p>LRU 策略中，当驻留集大小为 m 时，S（m，t）中保持着最近使用过的 m 个页帧；当驻留集大小为 m+1 时，S（m+1，t）中保持着最近使用过的 m+1 个页帧。故 S（m，t）属于 S（m+1，t），LRU 策略是栈算法。</p><h5 id="clock"><a class="anchor" href="#clock">#</a> CLOCK</h5><p>基于 LRU 的思想<br>硬件在页面被访问时设置页表项中的访问位<br>随着表针的移动，淘汰访问位是 0 的页面，或清除页面的访问位。<br>实用的页面置换算法</p><h5 id="nru最近未使用"><a class="anchor" href="#nru最近未使用">#</a> NRU (最近未使用)</h5><p>为页帧在页表项中增加一位使用位，硬件每访存一次即将对应页的使用位置 1，操作系统页面管理程序定时将所有使用位清 0。淘汰时任选一个使用位为 0 (表示 OS 清 0 周期内没被使用过）的页。<br>操作系统选择淘汰页时，尽量避免选被修改过的页。因此，选择淘汰页次序：</p><h4 id="驻留集大小可变的全局置换策略"><a class="anchor" href="#驻留集大小可变的全局置换策略">#</a> 驻留集大小可变的全局置换策略</h4><h5 id="ws"><a class="anchor" href="#ws">#</a> WS</h5><p>若驻留集中某页有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">△</mi></mrow><annotation encoding="application/x-tex">\triangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">△</span></span></span></span> 个访问间隔没被访问则将其淘汰 (正是因为这个特性，才是动态的)</p><h6 id="实现"><a class="anchor" href="#实现">#</a> 实现:</h6><p>每一页面设一计数器，每访存一次，将所有其他页计数器 + 1, 所访存的计数器清零，淘汰计数器等于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">△</mi></mrow><annotation encoding="application/x-tex">\triangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">△</span></span></span></span> 的页面</p><h5 id="实际上开销太大没有用"><a class="anchor" href="#实际上开销太大没有用">#</a> 实际上：开销太大，没有用</h5><h5 id="sws"><a class="anchor" href="#sws">#</a> SWS</h5><p>定时检查计时器，淘汰计时器值大于等于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">△</mi></mrow><annotation encoding="application/x-tex">\triangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">△</span></span></span></span> 的页面 (当前时钟值 - 页表时钟值)&gt;<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">△</mi></mrow><annotation encoding="application/x-tex">\triangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">△</span></span></span></span> 的页面)</p><h5 id="硬件消耗还是很大"><a class="anchor" href="#硬件消耗还是很大">#</a> 硬件消耗还是很大</h5><h3 id="置换策略选择"><a class="anchor" href="#置换策略选择">#</a> 置换策略选择</h3><p>动态驻留集 sws + 淘汰页数据延迟清除</p><p>设立两个队列：自由链表和修改链表。<br>定时做页淘汰（SWS）：淘汰时不立即抹去页中数据，根据页面修改否挂入自由链 / 修改链，修改链过长或自由链过短时，回写页面后改挂到自由链中。<br>若 paging in 要用空页时，选自由链的第一页帧，这时页中数据被覆盖。<br>若在自由链 / 修改链中的页面再次被访问时，则将该页从链中摘除，使该页又能通过页表项访问到。</p><pre><code class="language-chinese"> 某计算机采用二级页表的分页存储管理方式，按字节编址，页大小为2^10 字节，页表项大小为2字节，逻辑地址结构为：

逻辑地址空间大小为2^16页，则表示整个逻辑地址空间的页目录表中包含表项的个数至少是： ?
</code></pre><p><img data-src="C:%5CUsers%5Cwww13%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211119140231647.png" alt="image-20211119140231647"></p><p>逻辑空间: 2^16 *2^10 =2^26</p><p>页大小为 2^10 页表项大小为 2, 则一页能写 2^9 个页表项</p><p>共 2^16 逻辑页，故需要 2^7 页</p><div class="tags"><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag"><i class="ic i-tag"></i> 操作系统,计算机</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">Edited on</span> <time title="Modified: 2021-12-07 08:57:27" itemprop="dateModified" datetime="2021-12-07T08:57:27+08:00">2021-12-07</time> </span><span id="2021/12/07/存储管理/" class="item leancloud_visitors" data-flag-title="21/12/7 存储管理 - 操作系统" title="Views"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">Views</span> <span class="leancloud-visitors-count"></span> <span class="text">times</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> Donate</button><p>Give me a cup of [coffee]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="nmhn WeChat Pay"><p>WeChat Pay</p></div><div><img data-src="/images/alipay.png" alt="nmhn Alipay"><p>Alipay</p></div><div><img data-src="/images/paypal.png" alt="nmhn PayPal"><p>PayPal</p></div></div></div><div id="copyright"><ul><li class="author"><strong>Post author: </strong>nmhn <i class="ic i-at"><em>@</em></i>年没怀念 der 博客</li><li class="link"><strong>Post link: </strong><a href="http://example.com/2021/12/07/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/" title="21&#x2F;12&#x2F;7 存储管理 - 操作系统">http://example.com/2021/12/07/存储管理/</a></li><li class="license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> unless stating additionally.</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2021/12/07/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2021&#x2F;12&#x2F;07&#x2F;v89j2r1gCKZ3dVE.jpg" title="21&#x2F;12&#x2F;7 文件系统-操作系统"><span class="type">Previous Post</span> <span class="category"><i class="ic i-flag"></i> 操作系统</span><h3>21/12/7 文件系统-操作系统</h3></a></div><div class="item right"><a href="/2021/12/07/%E5%A4%96%E8%AE%BE/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2021&#x2F;12&#x2F;07&#x2F;BVOXCbkALYh4Ru7.jpg" title="21&#x2F;12&#x2F;7 设备管理"><span class="type">Next Post</span> <span class="category"><i class="ic i-flag"></i> 操作系统</span><h3>21/12/7 设备管理</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="Contents"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">存储管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%AE%BF%E9%97%AE%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">地址访问保护机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E4%B8%8B%E7%95%8C%E5%AF%84%E5%AD%98%E5%99%A8%E5%92%8C%E5%9C%B0%E5%9D%80%E6%A3%80%E6%9F%A5%E6%9C%BA%E5%88%B6"><span class="toc-number">1.0.0.1.1.</span> <span class="toc-text">上下界寄存器和地址检查机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%9F%BA%E5%9D%80%E5%AF%84%E5%AD%98%E5%99%A8-%E9%95%BF%E5%BA%A6%E5%AF%84%E5%AD%98%E5%99%A8%E5%92%8C%E5%8A%A8%E6%80%81%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E6%9C%BA%E5%88%B6"><span class="toc-number">1.0.0.1.2.</span> <span class="toc-text">2. 基址寄存器、长度寄存器和动态地址转换机制</span></a></li></ol></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E5%88%86%E5%8C%BA"><span class="toc-number">1.1.</span> <span class="toc-text">可变分区</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%80%9D%E6%83%B3%E9%A2%84%E5%85%88%E4%B8%8D%E5%88%92%E5%88%86%E5%86%85%E5%AD%98%E5%BD%93%E4%BD%9C%E4%B8%9A%E9%9C%80%E8%A6%81%E6%97%B6%E5%90%91%E7%B3%BB%E7%BB%9F%E7%94%B3%E8%AF%B7%E7%B3%BB%E7%BB%9F%E4%BB%8E%E5%85%B6%E4%B8%AD%E6%8C%96%E5%87%BA%E4%B8%80%E5%9D%97%E7%BB%99%E8%AF%A5%E4%BD%9C%E4%B8%9A"><span class="toc-number">1.1.0.0.0.1.</span> <span class="toc-text">思想: 预先不划分内存，当作业需要时向系统申请，系统从其中挖出一块给该作业</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E9%81%93%E8%BF%9E%E7%BB%AD%E5%8F%AF%E5%8F%98%E5%88%86%E5%8C%BA%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">多道连续可变分区法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%E5%A4%9A%E9%81%93%E8%BF%9E%E7%BB%AD%E4%B8%8D%E5%9B%BA%E5%AE%9A%E5%88%92%E5%88%86%E5%86%85%E5%AD%98"><span class="toc-number">1.1.1.0.1.</span> <span class="toc-text">特点：多道，连续，不固定划分内存</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.1.0.2.</span> <span class="toc-text">管理方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.1.0.3.</span> <span class="toc-text">释放方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E4%B8%80"><span class="toc-number">1.1.1.0.4.</span> <span class="toc-text">例一</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%85%8D%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">分配方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E7%94%A8%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">可用空间管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A7%E8%87%B4%E6%9C%BA%E5%88%B6-%E5%B0%86%E5%B7%B2%E6%9C%89%E7%9A%84%E8%BF%9B%E7%A8%8B%E6%8C%AA%E5%88%B0%E4%B8%80%E8%B5%B7%E8%85%BE%E5%87%BA%E5%A4%A7%E5%9D%97%E7%9A%84%E8%BF%9E%E7%BB%AD%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.1.2.1.</span> <span class="toc-text">紧致机制 -- 将已有的进程挪到一起，腾出大块的连续空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E5%86%8D%E5%AE%9A%E4%BD%8D%E5%BC%8F%E5%88%86%E5%8C%BA-%E6%B5%AE%E5%8A%A8%E5%88%86%E5%8C%BA%E5%88%86%E9%85%8D"><span class="toc-number">1.1.1.2.2.</span> <span class="toc-text">可再定位式分区 -- 浮动分区分配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">页式存储管理</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E4%BD%9C%E4%B8%9A%E4%B8%8D%E8%BF%9E%E7%BB%AD%E5%AD%98%E6%94%BE%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.0.0.0.1.</span> <span class="toc-text">解决作业不连续存放的问题</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.0.0.1.</span> <span class="toc-text">基本原理</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF2%E7%9A%84k%E6%AC%A1%E5%B9%82"><span class="toc-number">1.2.0.0.1.1.</span> <span class="toc-text">为什么是 2 的 k 次幂？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E8%A1%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">快表</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8bitmap%E6%95%B0%E7%BB%84%E7%A9%BA%E9%97%B2%E9%A1%B5%E5%B8%A7%E9%93%BE%E7%AE%A1%E7%90%86%E5%8F%AF%E7%94%A8%E9%A1%B5%E5%B8%A7"><span class="toc-number">1.2.1.0.0.1.</span> <span class="toc-text">使用 bitmap 数组 &#x2F; 空闲页帧链管理可用页帧</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB"><span class="toc-number">1.2.1.0.1.</span> <span class="toc-text">共享</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B6%8A%E7%95%8C%E4%BF%9D%E6%8A%A4"><span class="toc-number">1.2.1.0.2.</span> <span class="toc-text">越界保护</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E4%BF%9D%E6%8A%A4"><span class="toc-number">1.2.1.0.3.</span> <span class="toc-text">访问保护</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%C3%B8%E4%BC%98%E7%82%B9"><span class="toc-number">1.2.2.</span> <span class="toc-text">Ø 优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%C3%B8%E4%B8%BB%E8%A6%81%E7%BC%BA%E7%82%B9"><span class="toc-number">1.2.3.</span> <span class="toc-text">Ø 主要缺点：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AE%B5%E5%BC%8F%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">段式存储管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%E6%8C%89%E4%BD%9C%E4%B8%9A%E7%9A%84%E8%87%AA%E7%84%B6%E6%AE%B5%E5%B0%86%E5%85%B6%E9%80%BB%E8%BE%91%E7%A9%BA%E9%97%B4%E5%88%86%E6%88%90%E8%8B%A5%E5%B9%B2%E6%AE%B5%E4%BD%9C%E4%B8%9A%E4%BB%A5%E6%AE%B5%E4%B8%BA%E5%8D%95%E4%BD%8D%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">特点: 按作业的自然段将其逻辑空间分成若干段，作业以段为单位分配内存。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AE%B5%E9%A1%B5%E5%BC%8F%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.1.</span> <span class="toc-text">段页式管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%89%A9%E5%85%85%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.</span> <span class="toc-text">内存扩充技术</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%80%9F%E5%8A%A9%E5%A4%A7%E5%AE%B9%E9%87%8F%E7%9A%84%E8%BE%85%E5%AD%98%E5%AE%9E%E7%8E%B0%E5%86%85%E5%AD%98%E7%9A%84%E6%89%A9%E5%85%85"><span class="toc-number">1.4.0.0.0.1.</span> <span class="toc-text">借助大容量的辅存实现内存的扩充</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%86%E7%9B%96%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.1.</span> <span class="toc-text">覆盖技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.2.</span> <span class="toc-text">交换技术</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%92%8C%E8%A6%86%E7%9B%96%E6%8A%80%E6%9C%AF%E5%AF%B9%E6%AF%94"><span class="toc-number">1.4.2.0.0.1.</span> <span class="toc-text">和覆盖技术对比</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">1.4.3.</span> <span class="toc-text">虚拟存储技术</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84%E6%8F%90%E4%BE%9B%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B%E4%B8%80%E4%B8%AA%E5%B7%A8%E5%A4%A7%E7%9A%84%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.4.3.1.1.</span> <span class="toc-text">目的：提供用户进程一个巨大的虚拟存储空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%8B%E6%AE%B5%E5%88%A9%E7%94%A8%E5%A4%96%E5%AD%98%E7%A3%81%E7%9B%98%E5%AE%9E%E7%8E%B0%E6%AD%A4%E8%99%9A%E7%A9%BA%E9%97%B4"><span class="toc-number">1.4.3.1.2.</span> <span class="toc-text">手段：利用外存 (磁盘) 实现此虚空间。</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">基本思想</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E9%A1%B5%E5%BC%8F"><span class="toc-number">1.4.3.4.1.</span> <span class="toc-text">虚拟页式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%A1%B5%E8%A1%A8%E5%A2%9E%E5%8A%A0%E5%A4%96%E5%AD%98%E6%A0%87%E8%AF%86%E4%BD%8D%E5%92%8C%E5%A4%96%E5%AD%98%E5%9C%B0%E5%9D%80%E9%A1%B9"><span class="toc-number">1.4.3.4.1.1.</span> <span class="toc-text">页表增加外存标识位和外存地址项</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E5%8C%BA"><span class="toc-number">1.4.3.4.1.2.</span> <span class="toc-text">交换区</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%BA%E9%A1%B5%E5%A4%84%E7%90%86"><span class="toc-number">1.4.3.4.1.3.</span> <span class="toc-text">缺页处理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%A1%B5%E6%B7%98%E6%B1%B0"><span class="toc-number">1.4.3.4.1.4.</span> <span class="toc-text">页淘汰</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AD%96%E7%95%A5"><span class="toc-number">1.4.4.</span> <span class="toc-text">页面置换策略</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%87%BA%E5%8F%91%E7%82%B9-%E6%8A%8A%E6%9C%AA%E6%9D%A5%E4%B8%8D%E5%86%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%88%96%E8%80%85%E7%9F%AD%E6%97%B6%E6%9C%9F%E5%86%85%E8%BE%83%E5%B0%91%E4%BD%BF%E7%94%A8%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B0%83%E5%87%BA"><span class="toc-number">1.4.4.0.0.1.</span> <span class="toc-text">出发点： 把未来不再使用的或者短时期内较少使用的页面调出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%A9%BB%E7%95%99%E9%9B%86%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%90%88%E6%B3%95%E9%A1%B5%E9%9B%86%E5%90%88"><span class="toc-number">1.4.4.0.0.2.</span> <span class="toc-text">驻留集：进程的合法页集合</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E4%B8%B2%E8%BF%9B%E7%A8%8B%E8%AE%BF%E9%97%AE%E8%99%9A%E6%8B%9F%E7%A9%BA%E9%97%B4%E7%9A%84%E5%9C%B0%E5%9D%80%E8%B8%AA%E8%BF%B9"><span class="toc-number">1.4.4.0.0.3.</span> <span class="toc-text">访问串：进程访问虚拟空间的地址踪迹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A9%BB%E7%95%99%E9%9B%86%E5%A4%A7%E5%B0%8F%E5%9B%BA%E5%AE%9A%E7%9A%84%E5%B1%80%E9%83%A8%E7%BD%AE%E6%8D%A2%E7%AD%96%E7%95%A5"><span class="toc-number">1.4.4.1.</span> <span class="toc-text">驻留集大小固定的局部置换策略</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fifo%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA"><span class="toc-number">1.4.4.1.1.</span> <span class="toc-text">FIFO（先进先出）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#opt%E6%9C%80%E4%BD%B3%E7%AE%97%E6%B3%95"><span class="toc-number">1.4.4.1.2.</span> <span class="toc-text">OPT（最佳算法）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lru%E6%9C%80%E8%BF%91%E6%9C%80%E5%B0%91%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.4.1.3.</span> <span class="toc-text">LRU（最近最少使用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#clock"><span class="toc-number">1.4.4.1.4.</span> <span class="toc-text">CLOCK</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nru%E6%9C%80%E8%BF%91%E6%9C%AA%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.4.1.5.</span> <span class="toc-text">NRU (最近未使用)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A9%BB%E7%95%99%E9%9B%86%E5%A4%A7%E5%B0%8F%E5%8F%AF%E5%8F%98%E7%9A%84%E5%85%A8%E5%B1%80%E7%BD%AE%E6%8D%A2%E7%AD%96%E7%95%A5"><span class="toc-number">1.4.4.2.</span> <span class="toc-text">驻留集大小可变的全局置换策略</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ws"><span class="toc-number">1.4.4.2.1.</span> <span class="toc-text">WS</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.4.4.2.1.1.</span> <span class="toc-text">实现:</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E4%B8%8A%E5%BC%80%E9%94%80%E5%A4%AA%E5%A4%A7%E6%B2%A1%E6%9C%89%E7%94%A8"><span class="toc-number">1.4.4.2.2.</span> <span class="toc-text">实际上：开销太大，没有用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sws"><span class="toc-number">1.4.4.2.3.</span> <span class="toc-text">SWS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A1%AC%E4%BB%B6%E6%B6%88%E8%80%97%E8%BF%98%E6%98%AF%E5%BE%88%E5%A4%A7"><span class="toc-number">1.4.4.2.4.</span> <span class="toc-text">硬件消耗还是很大</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%AE%E6%8D%A2%E7%AD%96%E7%95%A5%E9%80%89%E6%8B%A9"><span class="toc-number">1.4.5.</span> <span class="toc-text">置换策略选择</span></a></li></div><div class="related panel pjax" data-title="Related"><ul><li><a href="/2021/12/07/%E5%A4%96%E8%AE%BE/" rel="bookmark" title="21/12/7 设备管理">21/12/7 设备管理</a></li><li class="active"><a href="/2021/12/07/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/" rel="bookmark" title="21/12/7 存储管理-操作系统">21/12/7 存储管理-操作系统</a></li><li><a href="/2021/12/07/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" rel="bookmark" title="21/12/7 文件系统-操作系统">21/12/7 文件系统-操作系统</a></li></ul></div><div class="overview panel" data-title="Overview"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="nmhn" data-src="/images/avatar.jpg"><p class="name" itemprop="name">nmhn</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">25</span> <span class="name">posts</span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span> <span class="name">categories</span></a></div><div class="item tags"><a href="/tags/"><span class="count">17</span> <span class="name">tags</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL25taG4=" title="https:&#x2F;&#x2F;github.com&#x2F;nmhn"><i class="ic i-github"></i></span> <a href="/1335894629@qq.com" title="1335894629@qq.com" class="item email"><i class="ic i-envelope"></i></a></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>Home</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2021/12/07/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2021/12/07/%E5%A4%96%E8%AE%BE/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>Random Posts</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/database/" title="In 数据库">数据库</a></div><span><a href="/2021/12/06/21-12-6-Database-exp-8/" title="21&#x2F;12&#x2F;6 Database exp 8">21/12/6 Database exp 8</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2022/03/16/React%E5%AD%A6%E4%B9%A020220314%20%E8%99%9A%E6%8B%9FDOM/" title="React学习20220314 虚拟DOM">React学习20220314 虚拟DOM</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2021/12/06/hello-world/" title="Hello World">Hello World</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/computernetwork/" title="In 计算机网络">计算机网络</a></div><span><a href="/2021/12/09/%E7%BD%91%E7%BB%9C%E5%B1%82/" title="网络层">网络层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/database/" title="In 数据库">数据库</a></div><span><a href="/2021/12/06/9.1%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%8C%E6%95%B4%E6%80%A7%E6%A6%82%E8%BF%B0/" title="21&#x2F;12&#x2F;6 Database 数据库完整性概述">21/12/6 Database 数据库完整性概述</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/software/" title="In 软件">软件</a></div><span><a href="/2021/12/07/%E5%A4%8D%E4%B9%A0/" title="21&#x2F;12&#x2F;6 软件体系结构复习">21/12/6 软件体系结构复习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/computernetwork/" title="In 计算机网络">计算机网络</a></div><span><a href="/2021/12/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0/" title="计算机网络复习">计算机网络复习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/database/" title="In 数据库">数据库</a></div><span><a href="/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/" title="21&#x2F;12&#x2F;6 Database 数据库操作">21/12/6 Database 数据库操作</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/2021/12/06/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7/" title="Untitled">Untitled</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/junior/" title="In 大三">大三</a> <i class="ic i-angle-right"></i> <a href="/categories/junior/computernetwork/" title="In 计算机网络">计算机网络</a></div><span><a href="/2021/12/09/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" title="数据链路层">数据链路层</a></span></li></ul></div><div><h2>Recent Comments</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">nmhn @ Nmhn</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="Symbols count total">NaNm words</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="Reading time total">NaN:aN</span></div><div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2021/12/07/存储管理/",favicon:{show:"（●´3｀●）Goooood",hide:"(´Д｀)Booooom"},search:{placeholder:"Search for Posts",empty:"We didn't find any results for the search: ${query}",stats:"${hits} results found in ${time} ms"},valine:!0,fancybox:!0,copyright:'Copied to clipboard successfully! <br> All articles in this blog are licensed under <i class="ic i-creative-commons"></i>BY-NC-SA.',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->